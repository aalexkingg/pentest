##
## Mobile Phone Reconassance Script
##
## Designed to collect as much data as possible using a variety of techniques
## Possible techniques include spear phishing, general data collection, and possible monitoring/backdooring/exploiting and location pinging
##

# Test phone number = 07745 929051

import sys
import re

def main():
	print("Recon Version 1.0.0")
	args = sys.argv[1:]
	
	if '-h' in args or 'help' in args:
		displayHelp()

	else:

		#Validate command format Minimum -D or -A with target number specified
		if len(args) < 2:
			print('Incorrect command usage. Type \'-h\' for help on usage.')
			stopScript()
			
		target_number = args[-1]
		args = args[:-1]

		target_number = '07745929051'		

		if not validateTarget(target_number):
			print('Not a valid target, please enter valid phone number.')
			stopScript()	

		for arg in args:
			if arg != '-D' or arg != '-O' or arg != '-A':
				print('Invalid option \'{0}\'. Type \'-h\' for help.'.format(arg))
				stopScript()

		for arg in args:
			if arg == '-D':
				if '-O' in args:
					pos = args.index('-O')
					try:
						fileName = args[pos+1]
					except IndexError:
						print('Output file name not specified')
				# Find way to verify filename specified, otherwise assign generic filename, filename MUST follow -O
				fetchData(target_number, False, None) 

			elif arg == '-O':
				if '-D' not in args:
					print("Cannot output without \'-D\' command.")
					stopScript()


# Display help menu

def displayHelp():
	print(" ------ Recon Help Menu -----\n")
	print("Usage: recon [commands] [phone number]")
	print("Commands:")
	print("\t-D: Data Collection - Output general data about target.")
	#print("\t-O: Output - Export report to file, can only be used with -D command.")
	print("\t-A: Attack")

def validateTarget(target_number):
	return True

	# Land line or mobile verification
	# Most likely check against .csv file

def fetchData(target_number, export, fileName):
	print("Collecting data on: {0}".format(target_number))

	if export:
		exportData(fileName)
	else:
		pass

def exportData(fileName):
	print("Exporting data to {0}".format(fileName))

def stopScript():
	sys.exit("Exiting Recon...")



if __name__ == '__main__':
	main()


## Notes
#
# Possibly run quick search onlien for existing data through data dumps/known databases
#
# What about ip recon not including nmap, but  could utilise nmap




